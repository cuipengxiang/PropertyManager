



<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="我爱社区 商铺 店铺" />
        <meta name="keywords" content="我爱社区,O2O,商铺,店铺" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="/ddxd/images/favicon.ico" />
        <title>添加店铺</title>
        <link href="/ddxd/css/base.css" rel="stylesheet">
            <link href="/ddxd/css/bootstrap.min.css" rel="stylesheet">
                <link href="/ddxd/css/buttons.css" rel="stylesheet">
                    <script src="/ddxd/js/jquery-1.11.1.min.js"></script>
                    <script src="/ddxd/js/bootstrap.min.js"></script>
                    <script src="/ddxd/js/jquery.bootstrap.min.js"></script>
                    <script type="text/javascript" src="/ddxd/js/ajaxFileUpload.js"></script>
                    <script src="/ddxd/js/jquery.blockUI.js"></script>
                    <script src="/ddxd/js/locache.js"></script>
                    <script src="/ddxd/js/storage.js"></script>
                    
                    <!-- 返回键监听 -->
                    <script type="text/javascript">
                        var pathname = window.location.href;
                        storage(pathname);
                        </script>
                    <!-- 执行上传文件操作的函数 -->
                    <script type="text/javascript">
                        function ajaxFileUpload(obj, index) {
                            var file = obj.files[0];
                            if (file.type != "image/png" && file.type != "image/jpeg" && file.type != "image/gif" && file.type != "image/bmp") {
                                $.messager.alert("请选择png,jpg,jpeg,gif,bmp格式的图片！");
                                return false;
                            }
                            if (file.size > 1000 * 1024) {
                                $.messager.alert("请选择小于1MB的图片!");
                                return false;
                            }
                            $.ajaxFileUpload({
                                             url : '/ddxd/app/uploadImage.do', //需要链接到服务器地址
                                             secureuri : false,
                                             fileElementId : 'file_' + index, //文件选择框的id属性
                                             dataType : 'Sting', //服务器返回的格式，可以是json
                                             success : function(data, status) //相当于java中try语句块的用法
                                             {
                                             $('#image_' + index).attr("src", "/ddxd" + data);
                                             document.getElementById(index).value = data;
                                             document.getElementById('file_' + index).value = null;
                                             },
                                             error : function(data, status, e) //相当于java中catch语句块的用法
                                             {
                                             $.messager.alert("网络繁忙,请稍后再试...");
                                             }
                                             });
                        }
                    
                    $(function(){
                      changeAfterPay();
                      // 		changeSendMoney();
                      $("input[type='checkbox']").change(function(){
                                                         $("input[name='"+$(this).attr("id")+"']").val($(this).is(":checked"));
                                                         });
                      $("#canOnlinePay,#canTakeout").change(function(){
                                                            // 			changeSendMoney();
                                                            changeAfterPay();
                                                            })
                      });
                      function changeAfterPay(){
                          if($("input[name='canOnlinePay']").val()=="true"&&$("input[name='canTakeout']").val()=="true"){
                              $("#canFpayEsend").attr("disabled",false);
                          }else{
                              $("#canFpayEsend").attr("disabled",true);
                              $("#canFpayEsend").attr("checked",false);
                              $("input[name='canFpayEsend']").val(false);
                          }
                      }
                    function changeSendMoney(){
                        if($("input[name='canTakeout']").val()=="true"){
                            $("#sendMoney").attr("disabled",false);
                            $("#limitMoney").attr("disabled",false);
                        }else{
                            $("#limitMoney").val(null);
                            $("#sendMoney").val(null);
                            $("#sendMoney").attr("disabled",true);
                            $("#limitMoney").attr("disabled",true);
                        }
                    }
                    </script>
                    <style>
                        #a {
                            display: inline-block;
                            position: relative;
                            overflow: hidden;
                            margin-left: 0px;
                        }
                    
                    #file_storeImg {
                        position: absolute;
                        right: 0;
                        top: 0;
                        font-size: 100px;
                        opacity: 1;
                        filter: alpha(opacity = 1);
                        z-index: -1;
                    }
                    
                    #myTab {
                        margin-bottom: 15px;
                    }
                    .label-l{
                        float:left;
                        margin-right:30px;
                    }
                    </style>
    </head>
    <body>
        
        
        
        
        
        <style>
            .main-icon{
                float:left;
                margin:4px 6px;
                width:32px;
                height:32px;
                background-image: url("/ddxd/images/shop_pics.png");
            }
        .icon-shop{
            background-position: -0px -0px;
        }
        .icon-goods{
            background-position: -0px -75px;
        }
        .icon-order{
            background-position: -0px -390px;
        }
        .icon-activity{
            background-position: -0px -150px;
        }
        .icon-message{
            background-position: -0px -225px;
        }
        .icon-user{
            background-position: -0px -300px;
        }
        #navbar{
            margin-bottom:10px;
            border:none;
            border-radius:0;
        }
        #logo{
            display: inline-block;
            padding-left:50px;
            color:#666699;
            background: url("/ddxd/images/main_logo.png") no-repeat 15px 10px;
        }
        #exit{
            height:50px;
            line-height:50px;
            color:#666699;
            font-size:16px;
            position:absolute;
            right:70px;
        }
        #main_menu{
            padding:0;
            height:100%;
        }
        .left-menu{
            padding:0;
        }
        #main_menu a{
            display:block;
            height:40px;
            line-height:40px;
            width:100%;
            color:#555555;
            overflow: hidden;
        }
        .title{
            background:#E3E4E8;
        }
        .menu-content{
            margin:0;
        }
        .menu-content a{
            padding-left:46px;
            background:#F1F2F6;
        }
        .container{
            width:100%;
        }
        </style>
        <script type="text/javascript">
            $(function(){
              if (/android/i.test(navigator.userAgent)){
              $("#backToCommunity").show();
              }
              })
            </script>
        <link href="/ddxd/js/ht/bs_message/css/sco.message.min.css" rel="stylesheet">
            <script type="text/javascript"  src="/ddxd/js/ht/contant/contant.js"></script>
            <script type="text/javascript"  src="/ddxd/js/ht/bs_message/sco.message.min.js"></script>
            <script type="text/javascript"  src="/ddxd/js/ht/ht_jq_base/ht_jq_base.js"></script>
            <script type="text/javascript"  src="/ddxd/js/ht/socket.io/socket.io-1.1.0.min.js"></script>
            <script type="text/javascript">
                $(function() {
                  var userId="4028804a496b2ea501496b3cc8490060";
                  ha.getUserMessage(userId, 'orderEvent' ,function(data){
                                    ha.info(ht.code(data.content));
                                    play();
                                    $("#newOrder").show();
                                    });
                  
                  $("#orderForm a").click(function(){
                                          $("#newOrder").hide();
                                          })
                  });
                  
                  function play(){
                      if ($.support.msie && $.support.version == '8.0') {
                          //本来这里用的是<bgsound src="system.wav"/>,结果IE8不播放声音,于是换成了embed
                          $('#newMessageDIV').html('<embed src="/ddxd/sound/message1.mp3"/>');
                      } else {
                          //IE9+,Firefox,Chrome均支持<audio/>
                          $('#newMessageDIV').html('<audio autoplay="autoplay"><source src="/ddxd/sound/message1.mp3"'
                                                   + 'type="audio/wav"/><source src="/ddxd/sound/message1.mp3" type="audio/mpeg"/></audio>');
                      }
                  }
            </script>
            <nav class="navbar navbar-default" id="navbar" role="navigation">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle top-button" data-toggle="collapse" data-target="#main_menu">
                        <span class="sr-only"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" id="logo" href="../sys/goMain.do">&nbsp;&nbsp;我爱社区</a>
                    <!--         <a class="glyphicon glyphicon-log-out" id="exit" href="../sys/exit.do">退出</a> -->
                </div>
            </nav>
            <div class="col-sm-3 col-md-2 left-menu">
                <div class="collapse navbar-collapse" id="main_menu">
                    <a href="javascript:void(0);" data-toggle="collapse" data-target="#shop_manage" class="title"><i class="main-icon icon-shop"></i>我家店铺</a>
                    <ul id="shop_manage" class="collapse in menu-content">
                        <li id="storeInfo">
                            <a href="../store/addStore.do">
                                店铺管理
                                
                            </a>
                        </li>
                        <li id="storePretty">
                            <a href="../template/enterTemplateIndex.do">
                                店铺美化
                            </a>
                        </li>
                        <li id="storeLocation">
                            <a href="../store/storeLocation.do">店铺定位</a>
                        </li>
                    </ul>
                    
                    <a href="javascript:void(0);" data-toggle="collapse" data-target="#goods_manage" class="title"><i class="main-icon icon-goods"></i>我家商品</a>
                    <ul id="goods_manage" class="collapse in menu-content">
                        <li id="goodsGroup">
                            <a href="../group/enterGroupIndex.do">分组管理</a>
                        </li>
                        <li id="goodsInfo">
                            <a href="../goods/enterGoodsIndex.do">商品管理</a>
                        </li>
                    </ul>
                    
                    <a href="javascript:void(0);" data-toggle="collapse" data-target="#order_manage" class="title"><i class="main-icon icon-order"></i>我家订单</a>
                    <ul id="order_manage" class="collapse in menu-content">
                        <li id="orderForm">
                            <a href="../order/enterOrderIndex.do">订单管理
                                <span class="label label-danger" id="newOrder" style="display: none">New</span>
                            </a>
                        </li>
                    </ul>
                    
                    <a href="javascript:void(0);" data-toggle="collapse" data-target="#activity_manage" class="title"><i class="main-icon icon-activity"></i>我家活动</a>
                    <ul id="activity_manage" class="collapse in menu-content">
                        <li>
                            <a href="../activity/index.do">活动管理</a>
                        </li>
                    </ul>
                    
                    <a href="javascript:void(0);" data-toggle="collapse" data-target="#push_manage" class="title"><i class="main-icon icon-message"></i>我家推广</a>
                    <ul id="push_manage" class="collapse in menu-content">
                        <li>
                            <a href="../push/index.do">广告推送</a>
                        </li>
                        <li class="hidden">
                            <a href="#">推送包</a>
                        </li>
                    </ul>
                    <a href="../sys/backToCommunity.do" id="backToCommunity" style="display: none;">返回社区</a>
                </div>
            </div>
            <div id="newMessageDIV" style="display:none"></div>
            <div class="col-sm-9 col-md-10 iframe">
                <div id="waitting">
                    <ol class="breadcrumb">
                        <li><a href="../index/index.jsp">首页</a></li>
                        <li class="active">店铺管理</li>
                    </ol>
                    
                    <h5 class="text-danger">
                        <i class="glyphicon glyphicon-fire"></i>您的开店申请还在验证中
                    </h5>
                    
                    <ul id="myTab" class="nav nav-tabs">
                        <li class="active"><a href="#baseInfo" data-toggle="tab">基本信息</a></li>
                        <li><a href="#businessInfo" data-toggle="tab">营业信息</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        <div class="tab-pane fade in active" id="baseInfo">
                            <form action="doEditStore.do?tabIndex=0" method="post" id="form" role="form">
                                <div class="form-group col-sm-12">
                                    <input type="text" class="form-control hidden" id="storeImg" name="storeImg" value="/images/default_goods.png"> <label>店铺图片</label> <br> <a href="#" id="a"> <img id="image_storeImg" src="/ddxd/images/default_goods.png" width="102px" height="102px" onclick="fileInputClick('storeImg');" /> <input type="file" id="file_storeImg" name="file_storeImg" accept="image/*" onchange="ajaxFileUpload(this,'storeImg')" style="cursor: pointer;" />
                                    </a>
                                    </div>
                                <div class="form-group col-sm-12">
                                    <label for="storeName">店铺名称<b class="text-danger">*</b></label> <input type="text" class="form-control" id="storeName" name="storeName" value="11111" placeholder="请不要超过10个字">
                                        </div>
                                <div class="form-group col-sm-12 col-md-12">
                                    <label for="storeAddr">店铺地址<b class="text-danger">*</b></label> <input type="text" class="form-control" id="storeAddr" name="storeAddr" value="111111111" placeholder="请输入店铺的详细地址,不要超过100字">
                                        </div>
                                <div class="form-group col-sm-12 col-md-6">
                                    <label for="storeType">店铺类型<b class="text-danger">*</b></label> <select class="form-control" id="storeType" name="storeType" onblur="">
                                        
                                        <option value="1" selected="selected">服装配饰</option>
                                        
                                        <option value="2" >餐饮小吃</option>
                                        
                                        <option value="3" >日用百货</option>
                                        
                                        <option value="4" >教育培训</option>
                                        
                                        <option value="5" >美妆护肤</option>
                                        
                                        <option value="6" >箱包皮具</option>
                                        
                                        <option value="7" >母婴玩具</option>
                                        
                                        <option value="8" >家居家纺</option>
                                        
                                        <option value="9" >3C数码</option>
                                        
                                        <option value="10" >运动户外</option>
                                        
                                        <option value="11" >珠宝首饰</option>
                                        
                                        <option value="12" >汽车配件</option>
                                        
                                        <option value="13" >医药保健</option>
                                        
                                        <option value="14" >装修建材</option>
                                        
                                        <option value="15" >家电办公</option>
                                        
                                        <option value="16" >家政维修</option>
                                        
                                        <option value="17" >食品特产</option>
                                        
                                        <option value="18" >礼品礼物</option>
                                        
                                        <option value="19" >二手用品</option>
                                        
                                        <option value="20" >酒店公寓</option>
                                        
                                        <option value="99" >综合其他</option>
                                        
                                    </select>
                                </div>
                                <div class="form-group col-sm-12 col-md-6">
                                    <label for="storePhone">店铺电话</label> <input type="text" class="form-control" id="storePhone" name="storePhone" placeholder="请填写正确的电话号码" value="111111111">
                                        </div>
                                <div class="form-group col-sm-12 col-md-6">
                                    <label for="shopkeeperName">店主姓名<b class="text-danger">*</b></label> <input type="text" class="form-control" id="shopkeeperName" name="shopkeeperName" value="111111">
                                        </div>
                                <div class="form-group col-sm-12 col-md-6">
                                    <label for="shopkeeperPhone">店主手机<b class="text-danger">*</b></label> <input type="text" class="form-control" id="shopkeeperPhone" name="shopkeeperPhone" value="11111111111">
                                        </div>
                                <div class="form-group col-sm-6 col-md-6">
                                    <button type="submit" class="btn-lg button button-flat-primary">确定</button>
                                </div>
                                <div class="form-group col-sm-6 col-md-6">
                                    <button type="reset" class="btn-lg button button-flat-action">重置</button>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="businessInfo">
                            <form action="doEditStore.do?tabIndex=1" method="post" id="form1" role="form">
                                <div class="form-group col-sm-12 col-md-12">
                                    <label>经营模式</label><br>
                                    <div class=" col-sm-12">
                                        <span class="label-l">是否支持外卖</span>
                                        <input type="checkbox" class="to-labelauty" data-labelauty="&nbsp;" id="canTakeout" >
                                            <input type="hidden" name="canTakeout" value="false" >
                                                </div>
                                    <div class=" col-sm-12">
                                        <span class="label-l">支持在线支付</span>
                                        <input type="checkbox" class="to-labelauty" data-labelauty="&nbsp;" id="canOnlinePay" >
                                            <input type="hidden" name="canOnlinePay" value="false" >
                                                </div>
                                    <div class=" col-sm-12">
                                        <span class="label-l">先支付后送货</span>
                                        <input type="checkbox" disabled="disabled" class="to-labelauty" data-labelauty="&nbsp;" id="canFpayEsend" >
                                            <input type="hidden" name="canFpayEsend" value="false" >
                                                </div>
                                    <!-- 							<div class=" col-sm-12 col-md-12"> -->
                                    <!-- 								订单总额不满 -->
                                    
                                    <!-- 								需支付 -->
                                    
                                    <!-- 							</div> -->
                                </div>
                                
                                <div class="form-group col-sm-12 col-md-12">
                                    <label for="businessTime">营业时间<b class="text-danger">*</b></label> <input type="text" class="form-control" id="businessTime" name="businessTime" value="">
                                        </div>
                                <div class="form-group col-sm-12 col-md-12">
                                    <label for="businessRange">营业范围<b class="text-danger">*</b></label>
                                    <textarea class="form-control" id="businessRange" name="businessRange"></textarea>
                                </div>
                                <div class="form-group col-sm-6 col-md-6">
                                    <button type="submit" class="btn-lg button button-flat-primary">确定</button>
                                </div>
                                <div class="form-group col-sm-6 col-md-6">
                                    <button type="reset" class="btn-lg button button-flat-action">重置</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <link rel="stylesheet" href="/ddxd/res/css/jquery-labelauty.css" type="text/css" media="screen" charset="utf-8" />
            <script type="text/javascript" src="/ddxd/res/js/jquery-labelauty.js"></script>
            <script>
                $(function(){
                  $(".to-labelauty").labelauty({ minimum_width: "0"});
                  });
                </script>
            <script src="/ddxd/js/jquery.validate.js"></script>
            <script type="text/javascript">
                $(function() {
                  if ("" == '1') {
                  $('#myTab li:eq(1) a').tab('show');
                  }
                  
                  });
                  function fileInputClick(index) {
                      if (/android/i.test(navigator.userAgent)) {
                          sendPicObjcCommand('ht', index);
                      } else {
                          $("#file_" + index).click();
                      }
                  }
            function showPic(picString, _id) {
                picString = "/upload/images/" + picString;
                $("#" + _id).val(picString);
                $('#image_' + _id).attr("src", "/ddxd" + picString);
            }
            //调用原生照片控件，判读是ios还是Android；进行不同调用
            function sendPicObjcCommand(params1, params2) {
                if (/android/i.test(navigator.userAgent)) {
                    window.JsInterFace.addPic4DDXD(params1, params2);
                } else if (/ipad|iphone|mac/i.test(navigator.userAgent)) {
                    document.activeElement.blur();
                    document.location = "objc://addPic:" + params1 + "," + params2;//params1：company_id,params2 ：picInput_id
                }
            }
            var MyValidator = function() {
                var handleSubmit = function() {
                    $('#form').validate({
                                        errorElement : 'span',
                                        errorClass : 'help-block',
                                        focusInvalid : false,
                                        rules : {
                                        storeName : {
                                        required : true,
                                        maxlength : 10
                                        },
                                        storeType : {
                                        required : true
                                        },
                                        storePhone : {
                                        required : true,
                                        phone : true
                                        },
                                        storeAddr : {
                                        required : true,
                                        maxlength : 100
                                        },
                                        shopkeeperName : {
                                        required : true,
                                        maxlength : 32
                                        },
                                        shopkeeperPhone : {
                                        required : true,
                                        maxlength : 11
                                        }
                                        },
                                        messages : {
                                        storeName : {
                                        required : "请输入店铺名称！",
                                        maxlength : "请不要超过32个字！"
                                        },
                                        storeType : {
                                        required : "请选择店铺类型！"
                                        },
                                        storePhone : {
                                        required : "请填写店铺电话！",
                                        phone : "请输入正确的电话格式！"
                                        },
                                        storeAddr : {
                                        required : "请输入店铺地址！",
                                        maxlength : "请不要超过100个字！"
                                        },
                                        shopkeeperName : {
                                        required : "请输入店主姓名！",
                                        maxlength : "请不要超过32个字！"
                                        },
                                        shopkeeperPhone : {
                                        required : "请输入店主手机！",
                                        maxlength : "请不要超过11个字！"
                                        }
                                        },
                                        highlight : function(element) {
                                        $(element).closest('.form-group').addClass('has-error');
                                        },
                                        
                                        success : function(label) {
                                        label.closest('.form-group').removeClass('has-error');
                                        label.remove();
                                        },
                                        errorPlacement : function(error, element) {
                                        element.parent('div').append(error);
                                        },
                                        submitHandler : function(form) {
                                        $.blockUI();
                                        //$("#displayZZ").click(); 
                                        form.submit();
                                        
                                        }
                                        });
                                        
                                        $('#form1').validate({
                                                             errorElement : 'span',
                                                             errorClass : 'help-block',
                                                             focusInvalid : false,
                                                             rules : {
                                                             limitMoney:{
                                                             ge_dig_dec_2p:true,
                                                             min:0,
                                                             max:999999999
                                                             },
                                                             sendMoney:{
                                                             ge_dig_dec_2p:true,
                                                             min:0,
                                                             max:999999999
                                                             },
                                                             businessTime : {
                                                             required : true,
                                                             maxlength : 20
                                                             },
                                                             businessRange : {
                                                             required : true,
                                                             maxlength : 100
                                                             }
                                                             },
                                                             messages : {
                                                             limitMoney:{
                                                             min:"请输入正整数",
                                                             max:"请不要输入过大的数字"
                                                             },
                                                             sendMoney:{
                                                             min:"请输入正整数",
                                                             max:"请不要输入过大的数字"
                                                             },
                                                             businessTime : {
                                                             required : "填写营业时间！",
                                                             maxlength : "请不要超过20个字！"
                                                             },
                                                             businessRange : {
                                                             required : "请填写营业范围！",
                                                             maxlength : "请不要超过100个字！"
                                                             }
                                                             },
                                                             highlight : function(element) {
                                                             $(element).closest('.form-group').addClass('has-error');
                                                             },
                                                             
                                                             success : function(label) {
                                                             label.closest('.form-group').removeClass('has-error');
                                                             label.remove();
                                                             },
                                                             errorPlacement : function(error, element) {
                                                             element.parent('div').append(error);
                                                             },
                                                             submitHandler : function(form) {
                                                             $.blockUI();
                                                             //$("#displayZZ").click(); 
                                                             form.submit();
                                                             }
                                                             });
                }
                return {
                    init : function() {
                        handleSubmit();
                    }
                };
            }().init();
            </script>
    </body>
</html>